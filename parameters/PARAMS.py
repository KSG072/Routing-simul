# PARAM.py
#TODO
# 논문은 위성과 지상 릴레이 모두 laser와 KA 동시에 사용. 또한, 그에 맞게 각각의 전용 큐가 있음 
# 현재 구현은 위성은 laser, 지상 릴레이는 KA 사용한다고 가정. 큐 또한 그에 맞게 사용
# PARAM.py

import random

# Configuration of constellations
NUM_SATELLITES = 1584
N = 72
M = 22
F = 39
altitude_km = 550
inclination_deg = 53
MIN_ELEVATION = 10 # degrees

TTL = 64

C = 3 * 100000

TAU = 0.001
TIME_SLOT = 1
TOTAL_TIME = 1200
KILO, MEGA, GIGA = 1000, 1000000, 1000000000

# Packet size (bits)
PACKET_SIZE_BITS = 64 * KILO
# Buffer sizes (위성 - Laser만, 지상 - Ka만)
# 위성 전용 Laser 버퍼s
# SENDING_BUFFER_QUEUE_LASER = 10 * 10**6  # bits
# SENDING_BUFFER_QUEUE_LASER_PACKETS = SENDING_BUFFER_QUEUE_LASER // (1500 * 8)

# ISL (Inter-Satellite Link) rates - Laser only
ISL_RATE_LASER = 1 * GIGA  # bps

# SGL (Satellite-Ground Link) rates - Ka band only
SGL_KA_DOWNLINK = 500 * MEGA  # bps KA:1.5, FSO:5
SGL_KA_UPLINK = 500 * MEGA  # bps KA:2, FSO:5

# Smoothing factors
SMOOTHING_FACTORS = [0.5, 2, 1, 2, 1]

SENDING_BUFFER_QUEUE_LASER = 10 * MEGA  # bits
SENDING_BUFFER_QUEUE_LASER_PACKETS = 500
# SENDING_BUFFER_QUEUE_LASER_PACKETS = 2147483647

# 지상 전용 Ka 버퍼
SENDING_BUFFER_QUEUE_KA = 5 * MEGA  # bits
SENDING_BUFFER_QUEUE_KA_PACKETS = 500
# SENDING_BUFFER_QUEUE_KA_PACKETS = 2147483647

PSI_DOWN = SMOOTHING_FACTORS[1] * TAU * ISL_RATE_LASER + SMOOTHING_FACTORS[2] * TAU * SGL_KA_DOWNLINK
# PSI_DOWN = 4 * MEGA
PSI_UP = SMOOTHING_FACTORS[3] * TAU * ISL_RATE_LASER + SMOOTHING_FACTORS[4] * TAU * SGL_KA_UPLINK




# 대기 버퍼
PUBLIC_WAITING_BUFFER_QUEUE_LASER = 1 * GIGA  # bits
PUBLIC_WAITING_BUFFER_QUEUE_LASER_PACKETS = PUBLIC_WAITING_BUFFER_QUEUE_LASER // PACKET_SIZE_BITS

PUBLIC_WAITING_BUFFER_QUEUE_KA = 40 * MEGA  # bits
PUBLIC_WAITING_BUFFER_QUEUE_KA_PACKETS = PUBLIC_WAITING_BUFFER_QUEUE_KA // PACKET_SIZE_BITS



PACKET_PER_MS_ON_ISL = ISL_RATE_LASER*TAU // PACKET_SIZE_BITS
PACKET_PER_MS_ON_UPLINK = SGL_KA_UPLINK*TAU // PACKET_SIZE_BITS
PACKET_PER_MS_ON_DOWNLINK = SGL_KA_DOWNLINK*TAU // PACKET_SIZE_BITS


# GENERATION_RATE_LIST = [38, 42, 46]
# GENERATION_RATE_LIST = [2, 6, 10, 14, 18, 22, 26, 30, 34, 38, 42, 46]
#
# N_k = 100


GENERATION_RATE_LIST = [1, 40, 80, 360]
# GENERATION_RATE_LIST = [320, 120]
# GENERATION_RATE_LIST = [240, 200]
# GENERATION_RATE_LIST = [160, 280]
#
# GENERATION_RATE_LIST = [1]



TRANS_DELAY_ISL = PACKET_SIZE_BITS / (TAU * ISL_RATE_LASER)
TRANS_DELAY_UP = PACKET_SIZE_BITS / (TAU * SGL_KA_UPLINK)
TRANS_DELAY_DOWN = PACKET_SIZE_BITS / (TAU * SGL_KA_DOWNLINK)

PACKET_GEN_INTERVAL = 1

MAX_SAT_P_DIFF = 4


CONGESTION_AREAS = [
    {"lat_min": 40.5, "lat_max": 41.0, "lon_min": -74.3, "lon_max": -73.7, "lat": 40.75, "lon": -74.0, "city": "New york"},

    {"lat_min": 34.0, "lat_max": 34.2, "lon_min": -118.5, "lon_max": -118.2, "lat": 34.1, "lon": -118.35, "city": "La"},
    {"lat_min": 51.2, "lat_max": 51.7, "lon_min": -0.5,  "lon_max": 0.3,   "lat": 51.45, "lon": -0.1,  "city": "London"},
    {"lat_min": 48.8, "lat_max": 49.0, "lon_min": 2.2,   "lon_max": 2.5,   "lat": 48.9,  "lon": 2.35,  "city": "Paris"},
    {"lat_min": 35.6, "lat_max": 35.8, "lon_min": 139.6, "lon_max": 139.9, "lat": 35.7,  "lon": 139.75,"city": "Tokyo"},
    {"lat_min": 37.4, "lat_max": 37.7, "lon_min": 126.8, "lon_max": 127.2, "lat": 37.55, "lon": 127.0, "city": "Seoul"},

    {"lat_min": 39.8, "lat_max": 40.0, "lon_min": 116.2, "lon_max": 116.6, "lat": 39.9,  "lon": 116.4, "city": "Beijing"},
    {"lat_min": 19.3, "lat_max": 19.6, "lon_min": -99.3, "lon_max": -99.0, "lat": 19.45, "lon": -99.15,"city": "Mexico city"},
    # {"lat_min": 55.6, "lat_max": 56.0, "lon_min": 37.4,  "lon_max": 37.8,  "lat": 55.8,  "lon": 37.6,  "city": "Moscow"},
    {"lat_min": -23.7,"lat_max": -23.4,"lon_min": -46.8, "lon_max": -46.4, "lat": -23.55,"lon": -46.6, "city": "Sao paulo"},
    {"lat_min": 28.4, "lat_max": 28.8, "lon_min": 76.8,  "lon_max": 77.4,  "lat": 28.6,  "lon": 77.1,  "city": "New delhi"},
    {"lat_min": 41.7, "lat_max": 42.0, "lon_min": 12.3,  "lon_max": 12.7,  "lat": 41.85, "lon": 12.5,  "city": "Rome"},

    {"lat_min": 31.1, "lat_max": 31.3, "lon_min": 121.3, "lon_max": 121.7, "lat": 31.2,  "lon": 121.5, "city": "Shanghai"},
    {"lat_min": -34.7,"lat_max": -34.4,"lon_min": -58.5, "lon_max": -58.0, "lat": -34.55,"lon": -58.25,"city": "Buenos aires"},
    {"lat_min": 52.3, "lat_max": 52.7, "lon_min": 4.7,   "lon_max": 5.1,   "lat": 52.5,  "lon": 4.9,   "city": "Amsterdam"},
    {"lat_min": 22.2, "lat_max": 22.5, "lon_min": 113.9, "lon_max": 114.3, "lat": 22.35, "lon": 114.1, "city": "Hongkong"},
    # {"lat_min": 59.2, "lat_max": 59.5, "lon_min": 17.8,  "lon_max": 18.2,  "lat": 59.35, "lon": 18.0,  "city": "Stockholm"},
    {"lat_min": 43.6, "lat_max": 44.0, "lon_min": -79.7, "lon_max": -79.2, "lat": 43.8,  "lon": -79.45,"city": "Toronto"},

    {"lat_min": 1.2,  "lat_max": 1.5,  "lon_min": 103.6, "lon_max": 104.0, "lat": 1.35,  "lon": 103.8, "city": "Singapore"},
    {"lat_min": 50.0, "lat_max": 50.2, "lon_min": 14.3,  "lon_max": 14.6,  "lat": 50.1,  "lon": 14.45, "city": "Praha"},
    {"lat_min": -33.9,"lat_max": -33.7,"lon_min": 151.1, "lon_max": 151.3, "lat": -33.8, "lon": 151.2, "city": "Sydney"},
    {"lat_min": -26.3,"lat_max": -26.0,"lon_min": 27.9,  "lon_max": 28.2,  "lat": -26.15,"lon": 28.05, "city": "Johannesburg"},
    {"lat_min": 35.0, "lat_max": 35.2, "lon_min": 135.6, "lon_max": 135.8, "lat": 35.1,  "lon": 135.7, "city": "Osaka"},

    {"lat_min": 30.0, "lat_max": 30.2, "lon_min": 31.1,  "lon_max": 31.4,  "lat": 30.1,  "lon": 31.25, "city": "Cairo"},
    # {"lat_min": 53.3, "lat_max": 53.6, "lon_min": -6.4,  "lon_max": -6.0,  "lat": 53.45, "lon": -6.2,  "city": "Dublin"},
    {"lat_min": 13.6, "lat_max": 13.9, "lon_min": 100.4, "lon_max": 100.8, "lat": 13.75, "lon": 100.6, "city": "Bangkok"},
    # {"lat_min": 59.8, "lat_max": 60.0, "lon_min": 30.2,  "lon_max": 30.5,  "lat": 59.9,  "lon": 30.35, "city": "St. petersburg"},
    {"lat_min": 25.2, "lat_max": 25.4, "lon_min": 55.2,  "lon_max": 55.4,  "lat": 25.3,  "lon": 55.3,  "city": "Dubai"},
    {"lat_min": 35.6, "lat_max": 35.8, "lon_min": 51.2,  "lon_max": 51.5,  "lat": 35.7,  "lon": 51.35, "city": "Tehran"},
    {"lat_min": 41.0, "lat_max": 41.3, "lon_min": 28.8,  "lon_max": 29.2,  "lat": 41.15, "lon": 29.0,  "city": "Istanbul"},
]

TRAFFIC_DENSITY_JSAC = [
    [6, 34, 19,  21,  23, 23, 23, 23,   4,  2, 2, 47,   183, 86, 21, 12,    12,  12,  11,  12,    77, 10, 10, 6],
    [1,  0,  0,  17,  32, 17, 17, 17,   0,  0, 1, 51,    52, 75, 71, 27,    41,  70,  67, 134,   151, 38, 0, 0],
    [0, 17,  0,   0,  15, 33, 38, 24,   0,  0, 1, 13,     3, 15, 22, 37,   115, 116, 118, 156,   149,  0, 0, 0],
    [0,  1,  0,   1,   0,  1, 26, 24,  15,  0, 0, 13,    99,  5, 27,  1,     1,  94,  40,  39,    34,  1, 1, 1],
    [1,  0,  1,   0,   0,  0, 10, 31,  14, 14, 0,  1,     2,  5, 31,  1,     0,   0,  10,  10,    13, 13, 1, 1],
    [1,  0,  1,   0,   0,  0,  0, 18,  21, 14, 0,  1,     1, 15, 14,  1,     0,   0,   0,   2,     2,  2, 2, 1],
    [1,  0,  0,   0,   0,  0,  0, 10,  22,  0, 0,  0,     0,  9,  0,  0,     0,   0,   0,   2,     2,  2, 2, 4],
    [0,  0,  0,   0,   0,  0,  0, 10,   1,  1, 0,  0,     0,  0,  0,  0,     1,   0,   0,   0,     0,  0, 0, 0]
]
TRAFFIC_DENSITY_CC1 = [
    [60, 50, 10, 20,    40, 10, 10, 10,                 90, 540, 280,     40,    10, 60, 10, 10],
       [10, 90, 10, 10,    20, 10, 10, 10,               90, 250, 150,    60,    40, 80, 10, 10],
       [10, 210, 360, 10,    10, 10, 10, 10,             50, 200, 100,    90,    20, 20, 10, 10],
       [10, 290, 660, 120,    10, 10, 10, 10,            50, 170, 200,    250,     10, 10, 10, 10],
       [10, 320, 500,   80,    60, 70, 30, 10,             40, 270, 580,   190,    120, 10, 10, 10],
       [10, 170, 90,  20,     160, 190, 20, 10,            40, 320, 650,   200   , 150, 90, 10, 10],
       [10, 10, 10,  10,     150, 30, 10, 10,              30, 190, 430,   90,    110, 60, 10, 10],
       [10, 290, 240,  40,    10, 10, 10, 10,             10, 40, 10,     40,      30, 40, 30, 10]]

TRAFFIC_DENSITY_CC_origin =[
[  60,10,10,10,     10,10,10,10,      90,90,50,50,     40,40,30,10],
[50,90,210,290,  320,170,10,290,  540,250,200,170,  270,320,190,40],
[10,10,360,660,   500,90,10,240,  280,150,100,200,  580,650,430,10],
[ 20,10,10,120,     80,20,10,40,     40,60,90,250,   190,200,90,40],

[  40,20,10,10,   60,160,150,10,      10,40,20,10,  120,150,110,30],
[  10,10,10,10,    70,190,30,10,      60,80,20,10,     10,90,60,40],
[  10,10,10,10,     30,20,10,10,      90,90,50,50,     40,40,30,30],
[  10,10,10,10,     10,10,10,10,      10,10,10,10,     10,10,10,10],
]
TRAFFIC_DENSITY_CC_float = [
[73.333333, 70.000000, 66.666667, 146.666667, 173.333333, 200.000000, 220.000000, 170.000000, 120.000000, 13.333333, 106.666667, 200.000000, 420.000000, 323.333333, 226.666667, 166.666667, 156.666667, 146.666667, 206.666667, 223.333333, 240.000000, 146.666667, 90.000000, 33.333333],
[4.444444, 4.444444, 4.444444, 160.000000, 226.666667, 293.333333, 222.222222, 131.111111, 40.000000, 4.444444, 55.555556, 106.666667, 124.444444, 95.555556, 66.666667, 44.444444, 66.666667, 88.888889, 257.777778, 273.333333, 288.888889, 191.111111, 97.777778, 4.444444],
[6.666667, 5.555556, 4.444444, 82.222222, 127.777778, 173.333333, 128.888889, 76.666667, 24.444444, 4.444444, 33.333333, 62.222222, 71.111111, 58.888889, 46.666667, 42.222222, 71.111111, 100.000000, 171.111111, 180.000000, 188.888889, 115.555556, 63.333333, 11.111111],
[8.888889, 6.666667, 4.444444, 4.444444, 28.888889, 53.333333, 35.555556, 22.222222, 8.888889, 4.444444, 11.111111, 17.777778, 17.777778, 22.222222, 26.666667, 40.000000, 75.555556, 111.111111, 84.444444, 86.666667, 88.888889, 40.000000, 28.888889, 17.777778],
[17.777778, 13.333333, 8.888889, 4.444444, 4.444444, 4.444444, 26.666667, 48.888889, 71.111111, 66.666667, 35.555556, 4.444444, 4.444444, 11.111111, 17.777778, 8.888889, 6.666667, 4.444444, 53.333333, 60.000000, 66.666667, 48.888889, 31.111111, 13.333333],
[11.111111, 8.888889, 6.666667, 4.444444, 4.444444, 4.444444, 28.888889, 53.333333, 77.777778, 40.000000, 22.222222, 4.444444, 15.555556, 21.111111, 26.666667, 8.888889, 6.666667, 4.444444, 28.888889, 41.111111, 53.333333, 37.777778, 26.666667, 15.555556],
[4.444444, 4.444444, 4.444444, 4.444444, 4.444444, 4.444444, 31.111111, 57.777778, 84.444444, 13.333333, 8.888889, 4.444444, 26.666667, 31.111111, 35.555556, 8.888889, 6.666667, 4.444444, 4.444444, 22.222222, 40.000000, 26.666667, 22.222222, 17.777778],
[13.333333, 13.333333, 13.333333, 13.333333, 13.333333, 13.333333, 26.666667, 23.333333, 20.000000, 13.333333, 13.333333, 13.333333, 66.666667, 66.666667, 66.666667, 40.000000, 40.000000, 40.000000, 33.333333, 33.333333, 33.333333, 26.666667, 26.666667, 26.666667]
]
TRAFFIC_DENSITY_CC = [
[73, 70, 67, 147,    173, 200, 220, 170,    120, 13, 107, 200,     420, 323, 227, 167,     157, 147, 207, 223,      240, 147, 90, 33],
[   4, 4, 4, 160,    227, 293, 222, 131,       40, 5, 56, 107,        124, 96, 67, 44,       67, 89, 258, 273,       289, 191, 98, 5],
[    7, 6, 4, 82,     128, 173, 129, 77,        25, 5, 33, 62,         71, 59, 47, 42,      71, 100, 171, 180,      189, 116, 63, 11],
[     9, 7, 4, 5,        29, 53, 36, 22,         9, 4, 11, 18,         18, 22, 27, 40,        76, 111, 84, 87,        89, 40, 29, 18],
[   18, 13, 9, 4,          4, 4, 27, 49,        71, 67, 36, 4,           4, 11, 18, 9,           7, 4, 53, 60,        67, 49, 31, 13],
[    11, 9, 7, 5,          4, 4, 29, 53,        78, 40, 22, 4,          16, 21, 27, 9,           7, 4, 29, 41,        53, 38, 27, 16],
[     4, 4, 4, 4,          4, 5, 31, 58,         85, 13, 9, 4,          27, 31, 36, 9,            7, 4, 4, 22,        40, 27, 22, 18],
[ 13, 13, 13, 13,        13, 13, 27, 23,       20, 13, 13, 13,         67, 67, 67, 40,         40, 40, 33, 33,        33, 27, 27, 27]
]
TRAFFIC_DENSITY = [
    [152.2222222, 377.7777778, 893.3333333, 743.3333333, 177.7777778, 468.8888889,    963.3333333, 504.4444444, 458.8888889, 961.1111111, 866.6666667, 225.5555556],
    [27.77777778, 95.55555556, 383.3333333, 263.3333333, 42.22222222, 124.4444444,    170,         155.5555556, 357.7777778, 522.2222222, 433.3333333, 121.1111111],

    [51.11111111, 24.44444444, 17.77777778, 157.7777778, 255.5555556, 66.66666667,    52.22222222, 62.22222222, 22.22222222, 183.3333333, 206.6666667, 86.66666667],
    [35.55555556, 35.55555556, 35.55555556, 138.8888889, 131.1111111, 40,             191.1111111, 151.1111111, 91.11111111, 93.33333333, 126.6666667, 93.33333333],
]


CONGESTION_PROBABILITY = 1 # 혼잡 지역에서 생성될 확률,

